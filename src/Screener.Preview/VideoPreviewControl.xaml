<UserControl x:Class="Screener.Preview.VideoPreviewControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             mc:Ignorable="d"
             d:DesignHeight="720" d:DesignWidth="1280"
             Background="Black"
             Loaded="OnLoaded"
             Unloaded="OnUnloaded">

    <Grid x:Name="RootGrid">
        <!-- Video preview image -->
        <Image x:Name="PreviewImage"
               Stretch="Uniform"
               RenderOptions.BitmapScalingMode="HighQuality" />

        <!-- Overlay layer for timecode, status, etc. -->
        <Canvas x:Name="OverlayCanvas"
                IsHitTestVisible="False">

            <!-- Recording indicator -->
            <Border x:Name="RecordingIndicator"
                    Canvas.Left="20" Canvas.Top="20"
                    Background="#CC000000"
                    CornerRadius="4"
                    Padding="8,4"
                    Visibility="Collapsed">
                <StackPanel Orientation="Horizontal">
                    <Ellipse Width="12" Height="12"
                             Fill="#FFFF4444"
                             Margin="0,0,8,0" />
                    <TextBlock Text="REC"
                               Foreground="White"
                               FontFamily="Consolas"
                               FontSize="14"
                               FontWeight="Bold" />
                </StackPanel>
            </Border>

            <!-- Timecode display -->
            <Border x:Name="TimecodeOverlay"
                    Canvas.Right="20" Canvas.Top="20"
                    Background="#CC000000"
                    CornerRadius="4"
                    Padding="12,6"
                    Visibility="Collapsed">
                <TextBlock x:Name="TimecodeText"
                           Text="00:00:00:00"
                           Foreground="White"
                           FontFamily="Consolas"
                           FontSize="18"
                           FontWeight="Bold" />
            </Border>

            <!-- Video format info -->
            <Border x:Name="FormatOverlay"
                    Canvas.Left="20" Canvas.Bottom="20"
                    Background="#CC000000"
                    CornerRadius="4"
                    Padding="8,4"
                    Visibility="Collapsed">
                <TextBlock x:Name="FormatText"
                           Text="1920x1080 59.94p"
                           Foreground="#CCCCCC"
                           FontFamily="Consolas"
                           FontSize="12" />
            </Border>

            <!-- Safe area guides (16:9 action safe and title safe) -->
            <Rectangle x:Name="ActionSafeGuide"
                       Stroke="#44FFFFFF"
                       StrokeThickness="1"
                       StrokeDashArray="4,4"
                       Visibility="Collapsed" />

            <Rectangle x:Name="TitleSafeGuide"
                       Stroke="#44FFFF00"
                       StrokeThickness="1"
                       StrokeDashArray="4,4"
                       Visibility="Collapsed" />

            <!-- Center crosshair -->
            <Path x:Name="CenterCrosshair"
                  Stroke="#44FFFFFF"
                  StrokeThickness="1"
                  Visibility="Collapsed" />
        </Canvas>

        <!-- No signal overlay -->
        <Border x:Name="NoSignalOverlay"
                Background="#DD000000"
                Visibility="Visible">
            <StackPanel VerticalAlignment="Center"
                        HorizontalAlignment="Center">
                <TextBlock Text="No Signal"
                           Foreground="#888888"
                           FontSize="32"
                           FontWeight="Light"
                           HorizontalAlignment="Center" />
                <TextBlock x:Name="DeviceStatusText"
                           Text="Waiting for video input..."
                           Foreground="#666666"
                           FontSize="14"
                           HorizontalAlignment="Center"
                           Margin="0,8,0,0" />
            </StackPanel>
        </Border>
    </Grid>
</UserControl>
